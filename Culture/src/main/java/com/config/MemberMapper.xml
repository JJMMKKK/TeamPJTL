<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.config.MemberMapper">

	<select id="selectAll" resultType="DTO">
		SELECT
			userId,
			userPw,
			userName,
			nickname,
			userSSN1,
			userSSN2,
			userGender,
			userPhoneNum1,
			userPhoneNum2,
			userPhoneNum3,
			userEmailId,
			userEmailDomain,
			userSignDate
		FROM
			memberDB
	</select>

	<select id="findUserId" resultType="DTO" parameterType="hashmap">
		SELECT
			userId,
			userPw,
			userName,
			nickname,
			userSSN1,
			userSSN2,
			userGender,
			userPhoneNum1,
			userPhoneNum2,
			userPhoneNum3,
			userEmailId,
			userEmailDomain,
			userSignDate
		FROM 
			memberDB
		WHERE 
			userName = #{userName}
			AND userSSN1 = #{ssn1}
			AND userSSN2 = #{ssn2}
	</select>

	<select id="findUserPW" resultType="DTO" parameterType="hashmap">
		SELECT
			userId,
			userPw,
			userName,
			nickname,
			userSSN1,
			userSSN2,
			userGender,
			userPhoneNum1,
			userPhoneNum2,
			userPhoneNum3,
			userEmailId,
			userEmailDomain,
			userSignDate
		FROM 
			memberDB
		WHERE 
			userName = #{userName}
			AND userId = #{userId}
			AND userSSN1 = #{ssn1}
			AND userSSN2 = #{ssn2}
	</select>

	<select id="isUserIdDuplicate" resultType="int" parameterType="String">
		SELECT COUNT(*)
		FROM memberDB
		WHERE userId = #{userId}
	</select>

	<select id="isUserNicknameDuplicate" resultType="int" parameterType="String">
		SELECT COUNT(*)
		FROM memberDB
		WHERE nickname = #{nickname}
	</select>

	<insert id="insertNewMember" parameterType="DTO"><!-- 개같은 코드 -->
		INSERT INTO memberDB (
		userId, userPw, userName, userSSN1, userSSN2, nickname,
		userGender, userPhoneNum1, userPhoneNum2, userPhoneNum3,
		userEmailId, userEmailDomain, userSignDate
		)
		VALUES (
		#{userId}, #{userPw}, #{userName}, #{userSSN1}, #{userSSN2},
		#{nickname}, #{userGender}, #{userPhoneNum1}, #{userPhoneNum2},
		#{userPhoneNum3}, #{userEmailId}, #{userEmailDomain}, #{userSignDate}
		);
	</insert>

	<select id="isUserPNDuplicate" resultType="int" parameterType="hashmap">
		SELECT COUNT(*)
		FROM memberDB
		WHERE 
			userPhoneNum1 = #{userPhoneNum1}
			AND userPhoneNum2 = #{userPhoneNum2}
			AND userPhoneNum3 = #{userPhoneNum3}
	</select>
	
	<select id="isUserEmailDuplicate" resultType="int" parameterType="hashmap">
		SELECT COUNT(*)
		FROM memberDB
		WHERE 
			userEmailId = #{userEmailId}
			AND userEmailDomain = #{userEmailDomain}
	</select>
	
	<select id="loginPossible" resultType="int" parameterType="hashmap">
		SELECT COUNT(*)
		FROM memberDB
		WHERE 
			userId = #{userId}
			AND userPw = #{userPw}
	</select>
	
	<select id="findMemberInfo" resultType="DTO" parameterType="hashmap">
		SELECT
			userId,
			userPw,
			userName,
			nickname,
			userSSN1,
			userSSN2,
			userGender,
			userPhoneNum1,
			userPhoneNum2,
			userPhoneNum3,
			userEmailId,
			userEmailDomain,
			userSignDate
		FROM
			memberDB
		WHERE 
			userId = #{userId}
			AND userPw = #{userPw}
		
	</select>
	
</mapper>